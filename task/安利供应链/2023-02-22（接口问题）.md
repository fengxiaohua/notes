已完成：
2023-02-22
1. 库存管理-成品分类与库存策略-对接分类结果（保存分类计算，根据版本获取分类结果）
2. 库存管理-成品分类与库存策略-对接库存策略预设（获取库存预设运行版本信息，策略运行预设保存）
3. 调整库存管理-安全库存计算样式问题;
4. 调整库存管理-黑暗表格统计样式下背景颜色；
5. 库存管理-安全库存计算-对接库存策略工作台（查询，ABC分类，XYZ分类，产品线下拉，计划员下拉，导出，运行计算）
6. 库存管理-安全库存计算-对接仓库库位和成本总览（查询）
7. 库存管理-安全库存计算-对接成品安全库存操作台（查询，ABC分类，XYZ分类，产品线下拉，计划员下拉，运行计算）

库存接口问题：

成品分类：
1. http://10.158.195.249/stock/product/save/classify 保存分类计算失败（查询分类计算时id是null）

{"dmClassifyDetailedDTOS":[{"skuCode":"120509CH","avgAccuracy":0.5437450496469065,"sumSalesVolume":13554354,"abcClass":"C","abcXyz":"CX","skuDesc":"TEST","skuLine":"NU","plannerName":"Jun","stockingType":null,"categoryCode8":null,"contributionValue":1.81},{"skuCode":"120511CH","avgAccuracy":0.5373101854273691,"sumSalesVolume":30829201,"abcClass":"A","abcXyz":"CX","skuDesc":"TEST","skuLine":"NU","plannerName":"Jun","stockingType":null,"categoryCode8":null,"contributionValue":4.11},{"skuCode":"120510CH","avgAccuracy":0.47072279884034807,"sumSalesVolume":13544544,"abcClass":"B","abcXyz":"CX","skuDesc":"TEST","skuLine":"NU","plannerName":"Jun","stockingType":null,"categoryCode8":null,"contributionValue":1.81},{"skuCode":"120506CH","avgAccuracy":0.35356000169547375,"sumSalesVolume":25059835,"abcClass":"C","abcXyz":"CY","skuDesc":"TEST","skuLine":"NU","plannerName":"Jun","stockingType":null,"categoryCode8":null,"contributionValue":3.34},{"skuCode":"120502CH","avgAccuracy":0.2943475992009083,"sumSalesVolume":51075175,"abcClass":"B","abcXyz":"CZ","skuDesc":"PAD-CORRUGATED-NU PRODUCT","skuLine":"ART","plannerName":"Liu","stockingType":null,"categoryCode8":null,"contributionValue":6.81},{"skuCode":"120507CH","avgAccuracy":0.07866022329963596,"sumSalesVolume":13544462,"abcClass":"B","abcXyz":"CZ","skuDesc":"TEST","skuLine":"NU","plannerName":"Jun","stockingType":null,"categoryCode8":null,"contributionValue":1.81},{"skuCode":"120505CH","avgAccuracy":0.02816937325386004,"sumSalesVolume":13544544,"abcClass":"C","abcXyz":"CZ","skuDesc":"TEST","skuLine":"NU","plannerName":"Jun","stockingType":null,"categoryCode8":null,"contributionValue":1.81}],"dmClassifyResult":[{"classifyCode":"AX","id":null,"contributionValue":4.11,"productNumber":1,"minProductSection":53.73,"maxProductSection":53.73,"runVersion":"2023/02/22"},{"classifyCode":"BZ","id":null,"contributionValue":8.62,"productNumber":2,"minProductSection":29.43,"maxProductSection":786.6,"runVersion":"2023/02/22"},{"classifyCode":"BX","id":null,"contributionValue":1.81,"productNumber":1,"minProductSection":47.07,"maxProductSection":47.07,"runVersion":"2023/02/22"},{"classifyCode":"CZ","id":null,"contributionValue":1.81,"productNumber":1,"minProductSection":2.82,"maxProductSection":2.82,"runVersion":"2023/02/22"},{"classifyCode":"CY","id":null,"contributionValue":3.34,"productNumber":1,"minProductSection":35.36,"maxProductSection":35.36,"runVersion":"2023/02/22"},{"classifyCode":"CX","id":null,"contributionValue":1.81,"productNumber":1,"minProductSection":54.37,"maxProductSection":54.37,"runVersion":"2023/02/22"}],"dmXyzConfiguration":{"id":null,"updateBy":"CNVISZ47","updateTime":"2023-02-22T09:38:15.620+08:00","runVersion":"2023/02/22","configMethodCode":"percentage","startTime":"2023/02/22","endTime":null,"ytype":20,"xtype":30,"ztype":50},"totalContribution":21.5}

code: 500，msg: "分类结果保存失败

2. http://10.158.195.249/stock/product/classify/result?runVersion=2023%2F02%2F22 根据版本获取分类结果
  2023/02/22

  {"msg":"\n### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 't1.runversion' in 'where clause'\n### The error may exist in URL [jar:file:/home/amway/app/amway-stock.jar!/BOOT-INF/lib/amway-system-stock.3.7.0.jar!/mapper/stock/DmClassifyResultMapper.xml]\n### The error may involve defaultParameterMap\n### The error occurred while setting parameters\n### SQL: select             t1.prediction_accuracy  as avgAccuracy ,             t1.contribution_value sumSalesVolume,             concat(t3.sku_class ,t1.sku_xyz )  as abcXyz,             t2.sku_describe as skuDesc ,             t2.sku_line as skuLine,             t2.planner_name plannerName,             t2.stocking_type stockingType,             t2.categoryCode8         from             dw_manul_sku_xyz t1                 left join dm_sku_master t2 on                 t1.sku_code = t2.sku_code                 left join dw_manul_sku_class t3 on t3.sku_code =t1.sku_code where t1.runversion =?\n### Cause: java.sql.SQLSyntaxErrorException: Unknown column 't1.runversion' in 'where clause'\n; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 't1.runversion' in 'where clause'","code":500}

3.  同步至安全模块
curl -X GET "http://localhost:8088/stock/product/policyPreset/save" -H "accept: */*" -H "Content-Type: application/json" -d "{\"policyPresetVOS\":[{\"classifyCode\":\"AX\",\"onlyProduct\":false},{\"classifyCode\":\"AY\",\"onlyProduct\":false},{\"classifyCode\":\"AZ\",\"onlyProduct\":false},{\"classifyCode\":\"BX\",\"onlyProduct\":true},{\"classifyCode\":\"BY\",\"onlyProduct\":true},{\"classifyCode\":\"BZ\",\"onlyProduct\":false},{\"classifyCode\":\"CX\",\"onlyProduct\":false},{\"classifyCode\":\"CY\",\"onlyProduct\":false},{\"classifyCode\":\"CZ\",\"onlyProduct\":false}]}"

TypeError: Failed to execute 'fetch' on 'Window': Request with GET/HEAD method cannot have body.

4. 获取库存工作台生产线
curl -X GET "http://localhost:8088/stock/workbench/skuLines

{
  "msg": "nested exception is org.apache.ibatis.executor.ExecutorException: A query was run and no Result Maps were found for the Mapped Statement 'com.amway.stock.mapper.WorkBenchMapper.getSkuLines'.  It's likely that neither a Result Type nor a Result Map was specified.",
  "code": 500
}

5. 获取库存工作台计划员
curl -X GET "http://localhost:8088/stock/workbench/plannerName"

{
  "msg": "nested exception is org.apache.ibatis.executor.ExecutorException: A query was run and no Result Maps were found for the Mapped Statement 'com.amway.stock.mapper.WorkBenchMapper.getPlannerName'.  It's likely that neither a Result Type nor a Result Map was specified.",
  "code": 500
}

6. 运行计算（单条数据可以运算，多条不行）
curl -X POST "http://localhost:8088/stock/workbench/calculation"

[{"adopt":false,"skuCode":"120502CH"},{"adopt":false,"skuCode":"120503CH"}]

{"msg":"Index: 2, Size: 2","code":500}

7. 成品安全库存操作台 所有过滤条件失效
http://localhost:8088/stock/fpworkbench/getWorkBench?skuClass=A