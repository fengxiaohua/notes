1. 正式环境日志定时清除 /home/clean_docker.sh
2. 开放平台后端捡起来开发
    export PATH=$(go env GOPATH)/bin:$PATH


回复邮件

docker build -f ./Dockerfile ./ -t gin_backend

#FROM golang:1.19
#
#WORKDIR /home/workspace
#ADD . /home/workspace
#
#RUN go env -w GO111MODULE=on
#RUN go env -w GOPROXY=https://goproxy.cn,direct
#RUN go get -u github.com/gin-gonic/gin
#EXPOSE 8083
#CMD go run main.go
#

# 第一阶段：构建Go应用程序
FROM golang:1.19-alpine3.18 AS builder

# 设置工作目录
WORKDIR /home/workspace

# 将所有文件复制到工作目录
COPY . .

# 设置代理和启用Go模块
RUN go env -w GO111MODULE=on
RUN go env -w GOPROXY=https://goproxy.cn,direct

# 下载Go依赖并编译Go应用程序
RUN go build -o main .

# 第二阶段：构建最终镜像
FROM alpine:latest

# 设置工作目录
WORKDIR /app

# 从首阶段复制Go应用程序
COPY --from=builder /home/workspace/main /app/main

# 暴露端口
EXPOSE 8083

# 运行Go应用程序
CMD ["./main"]

