测试krakend go插件记录resp可行性

第三方系统链接，nginx添加微信小程序需要对挂载链接做安全验证


代码迁移：

open-platform-update:
    cd /home/Open-Platform
    git pull
    docker restart open-platform_krakend_ce_1
    sleep 5
    /bin/cp -rf ./krakend/out.json ./data/

grafana-update:
    cd /home/Open-Platform
    git pull
    docker-compose restart grafana

keycloak-update:
    cd /home/Open-Platform
    git pull
    docker-compose up -d keycloak 

krakend-plugin-update:
    # 设置go环境
    export GOROOT=$JENKINS_HOME/tools/org.jenkinsci.plugins.golang.GolangInstallation/go-1.16/go
    export PATH=$PATH:$GOROOT/bin

    go version

    cd krakend/plugins/krakend-request-log

    go env -w GOPROXY=https://goproxy.cn,direct
    go mod download
    go build -buildmode=plugin -o ../krakend-request-log.so .

    #cd easeprobe

    # 获取out.json
    #curl -o out.json --location --request GET 'api.tongji.edu.cn/v1/config/out.json' \
    #--header 'Authorization: $$8F@pM93j*8u9ER'


    # IP白名单监控
    #go run generate_config.go

    # --------------------------------
    # 进入 keycloak ClientScopes 组建目录
    #cd ../keycloak-clientscopes/

    # 拷贝之前获取的 out.json
    #cp ../easeprobe/out.json out.json

    # 产生 keycloak 配置文件
    #bash generate_keycloak_config.sh /config/keycloak.json 192.168.50.199 8403 "${KEYCLOAK_USERNAME}" "${KEYCLOAK_PWD}"

    # 执行
    #go run extract_scopes.go common.go

    # 更新现存 clientscopes 的 description
    #go run update_scopes.go common.go

    docker restart open-platform_krakend_ce_1